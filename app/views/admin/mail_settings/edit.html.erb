<%= render :partial => "admin/shared/configuration_menu" %>
<h1><%= t :mail_server_preferences %></h1>
<% form_tag(admin_mail_settings_path, :method => :put) do %>
  <fieldset>
    <legend><%= t :general %></legend>
    <div class="checkbox">
      <label>
        <%= check_box_tag("preferences[enable_mail_delivery]", "1", Spree::Config[:enable_mail_delivery]) %>
        <%= t :enable_mail_delivery %>
      </label>
      <input name="preferences[enable_mail_delivery]" type="hidden" value="0" />
    </div>
    <div class="text">
      <label><%= t :send_mails_as %></label>
      <%= text_field_tag("preferences[mails_from]", Spree::Config[:mails_from], :maxlength => 256) %>
    </div>
    <div class="text">
      <label><%= t :send_copy_of_all_mails_to %></label>
      <%= text_field_tag("preferences[mail_bcc]", Spree::Config[:mail_bcc], :size => 40, :maxlength => 256) %>
    </div>
  </fieldset>
  <fieldset>
    <legend><%= t :orders %></legend>
    <div class="text">
      <label><%= t :send_order_mails_as %></label>
      <%= text_field_tag("preferences[order_from]", Spree::Config[:order_from], :maxlength => 256) %>
    </div>
    <div class="text">
      <label><%= t :send_copy_of_orders_mails_to %></label>
      <%= text_field_tag("preferences[order_bcc]", Spree::Config[:order_bcc], :size => 40, :maxlength => 256) %>
    </div>
  </fieldset>
  <fieldset>
    <legend><%= t :email %></legend>
      <div class="text">
        <label><%= t :smtp_server %></label>
        <%= text_field_tag("preferences[mail_domain]", Spree::Config[:mail_domain]) %>
      </div>
      <div class="text">
        <label><%= t :smtp_mail_host %></label><%= text_field_tag("preferences[mail_host]", Spree::Config[:mail_host]) %>
      </div>
      <div class="text">
        <label><%= t :smtp_port %></label>
        <%= text_field_tag("preferences[mail_port]", Spree::Config[:mail_port]) %>
      </div>
      <div class="text">
        <label><%= t :secure_connection_type %></label>
        <%= select_tag("preferences[secure_connection_type]", options_for_select(AppConfiguration::SECURE_CONNECTION_TYPES, Spree::Config[:secure_connection_type])) %>
      </div>
      <div class="text">
        <label><%= t :smtp_authentication_type %></label>
        <%= select_tag("preferences[mail_auth_type]", options_for_select(AppConfiguration::MAIL_AUTH, Spree::Config[:mail_auth_type])) %>
      </div>
      <div class="text">
        <label><%= t :smtp_username %></label>
        <%= text_field_tag("preferences[smtp_username]", Spree::Config[:smtp_username]) %>
      </div>
      <div class="text">
        <label><%= t :smtp_password %></label>
        <%= password_field_tag("preferences[smtp_password]", Spree::Config[:smtp_password]) %>
      </div>
    </fieldset>
  </div>
  <div class="button"><%= button t(:save_preferences) %></div>
<% end %>
